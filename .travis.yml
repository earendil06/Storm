dist: trusty
sudo: required

addons:
  firefox: latest
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable fluxbox



matrix:
  include:
    - language: node_js
      node_js:
        - 8
      before_script:
        - "export DISPLAY=:99.0"
        - "sh -e /etc/init.d/xvfb start"
        - sleep 3
        - fluxbox >/dev/null 2>&1 &
        - cd ./StormWeb/
        - npm install
        - bower install
        - npm i typescript --save-dev
        - npm run antlr
        - find ./src
        - npm run build

      script:
        - npm run test
        - npm run test2

    - language: scala
      scala:
        - 2.12.4
      before_script:
        - cd ./engine/
        - sbt clean "fastOptJS"
        - cp target/scala-2.12/engine-fastopt.js ../StormWeb/js/
